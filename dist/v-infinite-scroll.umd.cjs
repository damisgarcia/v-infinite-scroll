(function(r,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],s):(r=typeof globalThis<"u"?globalThis:r||self,s(r.vInfiniteScroll={},r.Vue))})(this,function(r,s){"use strict";function d(e){return typeof e=="function"?e():s.unref(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const p=()=>{};function h(e,n){function i(...t){return new Promise((c,o)=>{Promise.resolve(e(()=>n.apply(this,t),{fn:n,thisArg:this,args:t})).then(c).catch(o)})}return i}function g(e,n={}){let i,t,c=p;const o=l=>{clearTimeout(l),c(),c=p};return l=>{const u=d(e),f=d(n.maxWait);return i&&o(i),u<=0||f!==void 0&&f<=0?(t&&(o(t),t=null),Promise.resolve(l())):new Promise((a,I)=>{c=n.rejectOnCancel?I:a,f&&!t&&(t=setTimeout(()=>{i&&o(i),t=null,a(l())},f)),i=setTimeout(()=>{t&&o(t),t=null,a(l())},u)})}}function v(e,n=200,i={}){return h(g(n,i),e)}function b(e){const n=document.createElement("span");return n.id="trigger",e.appendChild(n),n}const m={mounted(e,n){const i=n.value;if(e.children.length>1)throw"vInfineScroll: Expected single child element";const t=b(e),c=v(l=>{l.forEach(u=>{u.isIntersecting&&i.onComplete()})},i.wait||200),o={root:e,rootMargin:"0px",threshold:.5};new IntersectionObserver(c,o).observe(t)}},S={install(e){e.directive("v-infinite-scroll",m)}};r.useInfiniteScroll=S,r.vInfiniteScroll=m,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
